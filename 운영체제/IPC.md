# IPC(Inter-Process Communication)

> 은빈

### 프로세스간 통신

실행되고 있는 프로세스 간에 통신을 가능하게 하는 매커니즘. 프로세스는 기본적으로 독립적이다. 하나의 프로세스의 실행이 다른 프로세스의 실행에 어떤 영향을 끼치지 않는다는 것이다. 그래서 멀티태스킹 운영체제 내, 또는 네트워크화/분산된 컴퓨터들 사이에 각각 실행되는 프로세스 간에 정보의 교환을 가능케 하는 것이 별도로 필요해졌다. 이를 위해 커널 영역에서 통신을 제공하고, 프로세스는 커널 영역에서 제공하는 IPC를 이용해 다른 프로세스와 통신을 할 수 있게 됐다. 호스트의 기종, 운영체제 등이 무엇인지에 관계 없이 일정한 규칙으로 통신하는 것이 중요하며, 통상적으로 두 프로세스간에 일정한 포맷과 순서를 따르는 메시지를 주고 받으며 통신한다.

### IPC 종류

1. 메시지 전달(Message Passing)

메시지 전달 모델은 커널 메모리 영역에 메시지 전달을 위한 채널을 만들어 협력하는 프로세스들 사이에 메시지 형태로 데이터를 송/수신하는 방법이다.
커널을 통해 진행되기 때문에 밑에서 설명할 메모리 공유 방식보다 속도가 느리다. 하지만 커널을 경유하기 때문에 프로세스들 사이에 동기화가 되어 있어 따로 동기화 로직을 짤 필요가 없다.

- 커널 단에서 관리되는 메시지 큐(message queue)를 이용해 송신 프로세스는 enqueue, 수신 프로세스는 dequeue하는 방식으로 상호간 통신한다.
- 주로 부모-자식간 단방향 통신으로 사용하는 파이프(pipe)를 이용해 하나의 프로세스는 데이터를 쓰고, 하나의 프로세서는 데이터를 읽으며 통신한다. 우리가 열심히 만들었던 그.. pipex..
- 네트워크 통신으로 흔히 사용하는 소켓(socket)방식으로 포트를 이용해 양방향 통신한다.


2. 메모리 공유(Shared Memory)

협력할 프로세스들이 주소 공간의 일부를 공유하며, 공유한 메모리 일부에 읽기/쓰기를 하면서 통신하는 방법이다. 프로세스가 커널에 공유 메모리 할당을 요청하고, 커널이 해당 공유 메모리를 할당해주면 그 다음부터 커널에 상관 없이 다른 프로세스가 해당 공유 메모리 공간에 접근할 수 있다. 그래서 메시지 전달 방식에 비해 속도가 빠르지만, 프로세스들 사이에 동기화가 되어 있지 않기 때문에 어떤 프로세스가 어떤 시점에 데이터를 썼는지, 읽어야 하는지를 모르므로 별도의 동기화 로직이 필요하다.


> 선경

### Inter Process Communication(IPC)
**IPC**는 프로세스 간 통신의 약자로 프로세스 간 데이터를 주고 받는 행위 혹은 그 방법을 의미한다. IPC는 왜 필요할까? 개별 프로세스는 독립적이지만 상황에 따라 통신이 요구될 수 있기 때문이다. 예를 들어 하나의 작업을 수행하기 위해 여러 개의 프로세스가 협력할 수도 있고, 동일한 정보를 여러 프로세스에서 공유할 수도 있다. 각 프로세스는 고유한 주소 공간을 가지기 때문에 서로 통신하여 자원과 데이터를 공유하려면 별도의 메커니즘이 필요하다. 따라서 IPC가 도입되었다!

<br>

### IPC의 종류
시그널, 파이프와 같은 **메시지 전달 방식**은 커널을 이용하기 때문에 구현이 쉬우나 시스템 콜이 필요해 오버헤드가 발생한다. **공유 메모리 방식**은 동기화 문제가 있긴 하지만 커널 의존도가 낮아 속도가 빠르다는 장점이 있다.

#### 메시지 전달 방식
커널을 통해 메시지를 전달하는 방식으로 통신한다.

##### 시그널 
외부 사건을 프로세스에게 전달하는 수단으로 시그널의 종류는 운영체제에서 미리 정의한다. 프로세스는 signal( ) 시스템 콜을 이용해 여러 시그널을 전달받는다. 시그널이 발생하면 프로세스는 실행중이던 작업을 중단하고 해당 시그널에 대응하는 시그널 핸들러를 실행한다. 

##### 파이프
한 프로세스의 출력과 다른 프로세스의 입력을 동일한 파이프에 연결하여 전자의 출력을 후자의 입력으로 사용하는 방식이다(우리가 pipex를 통해 무려 실습한 바 있다...!). 데이터는 단방향으로만 전달 가능하며 하나의 프로세스가 파이프를 이용 중이라면 다른 프로세스는 접근할 수 없다. 

<br>

#### 공유 메모리 방식  
##### 메모리 공유(shared memory)
여러 프로세스가 특정한 메모리 영역을 공유하는 방식이다. 해당 위치에 각 프로세스가 필요한 읽기/쓰기 작업을 수행해서 통신한다. 이 경우 동일한 영역에 서로 다른 프로세스가 동시에 접근할 수 있기 때문에 [경쟁 조건](https://github.com/k1ngbon/improved-broccoli/blob/main/운영체제/Race_Condition.md)이 발생할 수 있다. 
