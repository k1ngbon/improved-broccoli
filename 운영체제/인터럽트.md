# 인터럽트(Interrupt)

> 은빈

### 인터럽트

시스템 콜에서 프로세스가 I/O 요청을 할 때 운영체제에 시스템 콜을 걸어 I/O 요청을 바로 받아올 수 있도록 한다고 했다. 이 때 운영체제가 A 프로세스도 B 프로세스도 아닌 I/O 처리를 바로 하도록 현재 진행중인 프로세스 및 작업들을 중단시킨다. 이 것이 바로 인터럽트.

### 인터럽트의 종류

#### 하드웨어 인터럽트

위에서 말한 I/O와 같이 하드웨어가 발생시킨 인터럽트를 하드웨어 인터럽트라고 한다. 운영체제에서 '인터럽트'라고 하면 이 하드웨어 인터럽트를 생각하면 된다.

I/O 말고 Timer 라는 것도 하드웨어 인터럽트에 속하는데, 이 Timer는 특정 프로그램이 CPU를 독점해 사용하는 것을 막기 위해 고안된 장치다. CPU를 사용한 지 특정한 시간이 지나면 CPU에 대한 제어권을 운영체제에게 넘기도록 되어 있다.

**입출력의 종류**
- 동기식 입출력(synchronous I/O)
	- I/O가 동기적으로 실행된다. 즉, 입출력 작업이 완료돼야 사용자 프로그램으로 제어권이 넘어가는 것.
- 비동기식 입출력(asynchronous I/O)
	- I/O가 비동기적으로 실행된다. 즉, 입출력 작업의 완료 여부와 관계 없이 제어권이 사용자 프로그램으로 바로 넘어가는 것.
동기식, 비동기식 입출력 모두 I/O가 시작되고 끝남을 인터럽트를 통해 알려 준다.

#### 소프트웨어 인터럽트

소프트웨어 인터럽트는 단순히 인터럽트라고 하지 않고 '트랩'이라는 별칭으로 불린다.

트랩에는 프로그램이 오류를 범한 경우와, 프로세스가 커널 함수를 호출한 경우 등이 있다. 전자를 Exception이라 하고, 후자는 우리가 알고 있는 System Call이다.


<br><br><br>

> 선경

### 인터럽트
인터럽트는 하드웨어 신호(전기적 신호)로 뭔가 예외 사건이 일어났을 때 "야야 이거 먼저 좀 봐줘!!!" 하는 거라고 볼 수 있다. 인터럽트가 발생하면 운영체제는 **현재 수행 중인 프로세스를 중단**시키고 해당 인터럽트에 대한 인터럽트 핸들러를 실행한다. 

**인터럽트 핸들러**는 운영체제의 일부분으로, 인터럽트를 처리하는 과정에서 제어권이 자연스럽게 운영체제로 넘어가게 된다. 컴퓨터 부팅 시 운영체제는 컴퓨터에서 정의된 각 인터럽트에 대해 관련 인터럽트 핸들러의 위치를 테이블 형태로 메모리에 초기화 시킨다. 

인터럽트와 시스템 콜의 처리 과정은 유사하다. 둘의 차이는 **인터럽트는 하드웨어에 의해 발생하고, 시스템 콜은 사용자 프로세스에 의해 발생**한다는 점이다. 그렇다면 인터럽트는 언제 사용할까? 프로세스가 비협조적인 경우 CPU를 넘겨받기 위해 사용한다. 프로세스가 협조적이라 시스템 콜을 적절하게 호출하면 운영체제가 주기적으로 CPU 제어권을 넘겨 받을 수 있다. 그러나 프로세스가 어쩔 CPU~ 하고 시스템 콜을 호출하지 않는다면 영원히 CPU를 독점할 수 있고, 운영체제는 아무것도 할 수 없다. 하지만 인터럽트가 있다면? 타이머 인터럽트를 통해 운영체제가 다시 CPU를 얻을 수 있다!

인터럽트의 또 다른 장점은 I/O 작업과 같이 시간이 오래 걸리는 작업을 수행할 때, 작업 완료 시 시스템이 이를 바로 알 수 있다는 점이다. 즉, 시스템이 반복적으로 완료 여부를 직접 체크(이러한 방식을 **폴링**이라고 한다)할 필요가 없어지기 때문에 I/O 요청 발생 시 CPU 연산과 중첩시켜 CPU 사용률을 높일 수 있다. 